parameters:
  cache_types: ['ReadWrite', 'ReadOnly', 'None']
  jobs: '4'
  clients: '4'
  duration: '600'
  scalefactors: [4800]
  actions: ['kubeslice']

jobs:
- ${{ each action in parameters.actions }}:
  - template: stressng.yaml
    parameters:
      vmsize: 'Standard_DS2_v2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'Standard_DS4_v2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'

  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M208MS_V2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M208S_V2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M128M'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M128MS'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M128S_V2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M128S'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_M128'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_HB120RS_V2'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'STANDARD_HB120RS_V3'
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'

  - template: stressng.yaml
    parameters:
      vmsize: 'Standard_DS2_v2'
      osdisktype: 'Managed'
      osdisksize: '512' 
      caching: "ReadOnly" 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'Standard_D4ads_v5'
      osdisktype: 'Ephemeral'
      osdisksize: '100' 
      caching: ReadOnly 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
  - template: stressng.yaml
    parameters:
      vmsize: 'Standard_D4ads_v5'
      osdisktype: 'Managed'
      osdisksize: '512' 
      caching: "ReadOnly" 
      jobs: '${{ parameters.jobs }}'
      client: '${{ parameters.clients }}'
      duration: '${{ parameters.duration }}'
      action: '${{ action }}'
